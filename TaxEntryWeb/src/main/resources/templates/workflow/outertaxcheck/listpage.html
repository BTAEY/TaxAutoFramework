<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>外部税务检查报表列表</title>
    <link rel="icon" type="image/x-icon" th:href="@{/favicon.ico}" />
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.css}" />
    <link rel="stylesheet" th:href="@{/css/common.css}" />
    <link rel="stylesheet" th:href="@{/css/navigation.css}" />
    <link rel="stylesheet" th:href="@{/plugins/slidemenu/slidemenu.css}" />
    <link th:href="@{/plugins/datepicker/css/bootstrap-datetimepicker.css}" rel="stylesheet"/>
    <link th:href="@{/plugins/bootstrap-select/css/bootstrap-select.css}" rel="stylesheet"/>
</head>
<body>
<div class="flex-container">
    <div th:replace="fragments/layout::navigation"></div>
    <div th:replace="fragments/layout::menu"></div>

    <div class="container" style="display: inline-block;">
        <div class="container">
            <a href="javascript:void(0);" id="createNew">新建</a>
            <table class="table">
                <tr>
                    <th>#</th>
                    <th>
                        <label>外部税务检查表名称</label>
                    </th>
                    <th>
                        <label>开始时间</label>
                    </th>
                    <th>
                        <label>结束时间</label>
                    </th>
                    <th>
                        <label>报告频率</label>
                    </th>
                    <th>
                        <label>所属流程</label>
                    </th>
                </tr>
                <th:block th:each="result,stat : ${resultset}">
                    <tr>
                        <td th:text="${stat.index+1}"></td>
                        <td th:text="${result.outertaxcheckname}"></td>
                        <td th:text="${#dates.format(result.checkstarttime,'yyyy-MM-dd HH:mm:ss')}"></td>
                        <td th:text="${#dates.format(result.checkendtime,'yyyy-MM-dd HH:mm:ss')}"></td>
                        <td th:text="${result.reportfrequency}"></td>
                        <th th:text="${result.workflowKey}"></th>
                    </tr>
                </th:block>
            </table>
        </div>
        <div class="modal fade" id="createFormModal"  tabindex="-1" role="dialog" aria-labelledby="createFormModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal" action="#" th:action="@{/workflow/outertaxcheck/submit}" method="post" enctype="multipart/form-data">
                            <div class="form-group">
                                <label for="outertaxcheckname">报表名称</label>
                                <input type="text" class="form-control" name="outertaxcheckname" id="outertaxcheckname" placeholder="报表名称"/>
                            </div>
                            <div class="form-group">
                                <label for="checkstarttime">开始日期</label>
                                <div class="input-group date form_date col-sm-5" data-date="" data-date-format="yyyy-mm-dd" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input th:type="text" class="form-control" id="checkstarttime" placeholder="开始日期" readonly="true" name="checkstarttime"/>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="checkendtime">结束日期</label>
                                <div class="input-group date form_date col-sm-5" data-date="" data-date-format="yyyy-mm-dd" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input th:type="text" class="form-control" id="checkendtime" placeholder="开始日期" readonly="true" name="checkendtime"/>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>选择流程</label>
                                <select class="selectpicker form-control" name="workflowkey">
                                    <th:block th:each="workflow : ${workflows}">
                                        <option th:value="${workflow.key}"><span th:text="${workflow.name}"></span></option>
                                    </th:block>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-default">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <span th:replace="fragments/layout::commonLoadJs"></span>
    <script th:src="@{/plugins/slidemenu/jquery-slidemenu.js}"></script>
    <script th:src="@{/plugins/bootstrap-select/js/bootstrap-select.js}"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#leftSlideMenu").slideMenu({url:'/menu/load'});
        });
    </script>

    <script th:src="@{/plugins/datepicker/js/bootstrap-datetimepicker.min.js}"></script>
    <script>
        $(".form_date").datetimepicker({
            weekStart: 1,
            todayBtn:  1,
            autoclose: 1,
            todayHighlight: 1,
            startView: 2,
            minView: 2,
            forceParse: 0,
            format:'dd/mm/yyyy'
        });
        $('.selectpicker').selectpicker();

        $("#createNew").click(function (evt) {
            $("#createFormModal").modal();
        });

    </script>
</body>
</html>